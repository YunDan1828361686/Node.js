(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21332a"],{ac3e:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{ref:"dragWrapper",staticClass:"org-tree-drag-wrapper",on:{mousedown:e.mousedownView,contextmenu:e.handleDocumentContextmenu}},[t("div",{staticClass:"org-tree-wrapper",style:e.orgTreeStyle},[e.data?t("v-org-tree",{attrs:{data:e.data,"node-render":e.nodeRender,"expand-all":!0,collapsable:""},on:{"on-node-click":e.handleNodeClick}}):e._e()],1)])},i=[],a=(n("c5f6"),n("90de")),r=[{key:"edit",label:"编辑部门"},{key:"detail",label:"查看部门"},{key:"new",label:"新增子部门"},{key:"delete",label:"删除部门"}],s={name:"OrgView",props:{zoomHandled:{type:Number,default:1},data:Object},data:function(){return{currentContextMenuId:"",orgTreeOffsetLeft:0,orgTreeOffsetTop:0,initPageX:0,initPageY:0,oldMarginLeft:0,oldMarginTop:0,canMove:!1}},computed:{orgTreeStyle:function(){return{transform:"translate(-50%, -50%) scale(".concat(this.zoomHandled,", ").concat(this.zoomHandled,")"),marginLeft:"".concat(this.orgTreeOffsetLeft,"px"),marginTop:"".concat(this.orgTreeOffsetTop,"px")}}},methods:{handleNodeClick:function(e,t,n){n()},closeMenu:function(){this.currentContextMenuId=""},getBgColor:function(e){return this.currentContextMenuId===e.id?e.isRoot?"#0d7fe8":"#5d6c7b":""},nodeRender:function(e,t){return e("div",{class:["custom-org-node",t.children&&t.children.length?"has-children-label":""],on:{mousedown:function(e){return e.stopPropagation()},contextmenu:this.contextmenu.bind(this,t)}},[t.label,e("dropdown",{attrs:{trigger:"custom",visible:this.currentContextMenuId===t.id},class:"context-menu",nativeOn:{click:this.handleDropdownClick},on:{"on-click":this.handleContextMenuClick.bind(this,t)},style:{transform:"scale(".concat(1/this.zoomHandled,", ").concat(1/this.zoomHandled,")")},directives:[{name:"click-outside",value:this.closeMenu}]},[e("dropdown-menu",{slot:"list"},[r.map((function(t){return e("dropdown-item",{attrs:{name:t.key}},[t.label])}))])])])},contextmenu:function(e,t){var n=t||window.event;n.preventDefault?n.preventDefault():n.returnValue=!1,this.currentContextMenuId=e.id},setDepartmentData:function(e){e.isRoot=!0,this.departmentData=e},mousedownView:function(e){this.canMove=!0,this.initPageX=e.pageX,this.initPageY=e.pageY,this.oldMarginLeft=this.orgTreeOffsetLeft,this.oldMarginTop=this.orgTreeOffsetTop,Object(a["i"])(document,"mousemove",this.mousemoveView),Object(a["i"])(document,"mouseup",this.mouseupView)},mousemoveView:function(e){if(this.canMove){var t=e.pageX,n=e.pageY;this.orgTreeOffsetLeft=this.oldMarginLeft+t-this.initPageX,this.orgTreeOffsetTop=this.oldMarginTop+n-this.initPageY}},mouseupView:function(){this.canMove=!1,Object(a["h"])(document,"mousemove",this.mousemoveView),Object(a["h"])(document,"mouseup",this.mouseupView)},handleDropdownClick:function(e){e.stopPropagation()},handleDocumentContextmenu:function(){this.canMove=!1},handleContextMenuClick:function(e,t){this.$emit("on-menu-click",{data:e,key:t})}},mounted:function(){Object(a["i"])(document,"contextmenu",this.handleDocumentContextmenu)},beforeDestroy:function(){Object(a["h"])(document,"contextmenu",this.handleDocumentContextmenu)}},c=s,u=n("2877"),d=Object(u["a"])(c,o,i,!1,null,null,null);t["default"]=d.exports}}]);