(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79fb9118","chunk-729fd47c","chunk-2d21332a","chunk-7485290c"],{"0cf2":function(t,e,n){"use strict";n("46b4")},"46b4":function(t,e,n){},5750:function(t,e,n){},a5cd:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"600px"}},[e("Card",{staticStyle:{height:"100%",width:"100%",overflow:"hidden"},attrs:{shadow:""}},[e("div",{staticClass:"department-outer"},[e("div",{staticClass:"tip-box"},[e("b",{staticStyle:{"margin-right":"20px"}},[t._v("\n          powered by\n          "),e("a",{attrs:{target:"blank",href:"https://github.com/lison16"}},[t._v("Lison")])]),e("a",{staticStyle:{"margin-right":"10px"},attrs:{target:"blank",href:"https://github.com/lison16/v-org-tree"}},[t._v("v-org-tree文档")])]),e("div",{staticClass:"zoom-box"},[e("zoom-controller",{attrs:{min:20,max:200},model:{value:t.zoom,callback:function(e){t.zoom=e},expression:"zoom"}})],1),e("div",{staticClass:"view-box"},[t.data?e("org-view",{attrs:{data:t.data,"zoom-handled":t.zoomHandled},on:{"on-menu-click":t.handleMenuClick}}):t._e()],1)])])],1)},a=[],i=n("ac3e"),s=n("90de"),r=n("bf20"),c=(n("5750"),{edit:"编辑部门",detail:"查看部门",new:"新增子部门",delete:"删除部门"}),u={name:"org_tree_page",components:{OrgView:i["default"],ZoomController:r["default"]},data:function(){return{data:null,zoom:100}},computed:{zoomHandled:function(){return this.zoom/100}},methods:{setDepartmentData:function(t){return t.isRoot=!0,t},handleMenuClick:function(t){var e=t.data,n=t.key;this.$Message.success({duration:5,background:!0,content:"点击了《".concat(e.label,"》节点的'").concat(c[n],"'菜单")})},getDepartmentData:function(){var t=this;this.$axios("node1/org","post").then((function(e){var n=[JSON.parse(JSON.stringify(e.data))];n=Object(s["c"])(n,"children",0);var o=Object(s["f"])(n,null);t.data=e.data,console.log([t.data],n,o)}))}},mounted:function(){this.getDepartmentData()}},l=u,d=n("2877"),m=Object(d["a"])(l,o,a,!1,null,null,null);e["default"]=m.exports},ac3e:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{ref:"dragWrapper",staticClass:"org-tree-drag-wrapper",on:{mousedown:t.mousedownView,contextmenu:t.handleDocumentContextmenu}},[e("div",{staticClass:"org-tree-wrapper",style:t.orgTreeStyle},[t.data?e("v-org-tree",{attrs:{data:t.data,"node-render":t.nodeRender,"expand-all":!0,collapsable:""},on:{"on-node-click":t.handleNodeClick}}):t._e()],1)])},a=[],i=(n("c5f6"),n("90de")),s=[{key:"edit",label:"编辑部门"},{key:"detail",label:"查看部门"},{key:"new",label:"新增子部门"},{key:"delete",label:"删除部门"}],r={name:"OrgView",props:{zoomHandled:{type:Number,default:1},data:Object},data:function(){return{currentContextMenuId:"",orgTreeOffsetLeft:0,orgTreeOffsetTop:0,initPageX:0,initPageY:0,oldMarginLeft:0,oldMarginTop:0,canMove:!1}},computed:{orgTreeStyle:function(){return{transform:"translate(-50%, -50%) scale(".concat(this.zoomHandled,", ").concat(this.zoomHandled,")"),marginLeft:"".concat(this.orgTreeOffsetLeft,"px"),marginTop:"".concat(this.orgTreeOffsetTop,"px")}}},methods:{handleNodeClick:function(t,e,n){n()},closeMenu:function(){this.currentContextMenuId=""},getBgColor:function(t){return this.currentContextMenuId===t.id?t.isRoot?"#0d7fe8":"#5d6c7b":""},nodeRender:function(t,e){return t("div",{class:["custom-org-node",e.children&&e.children.length?"has-children-label":""],on:{mousedown:function(t){return t.stopPropagation()},contextmenu:this.contextmenu.bind(this,e)}},[e.label,t("dropdown",{attrs:{trigger:"custom",visible:this.currentContextMenuId===e.id},class:"context-menu",nativeOn:{click:this.handleDropdownClick},on:{"on-click":this.handleContextMenuClick.bind(this,e)},style:{transform:"scale(".concat(1/this.zoomHandled,", ").concat(1/this.zoomHandled,")")},directives:[{name:"click-outside",value:this.closeMenu}]},[t("dropdown-menu",{slot:"list"},[s.map((function(e){return t("dropdown-item",{attrs:{name:e.key}},[e.label])}))])])])},contextmenu:function(t,e){var n=e||window.event;n.preventDefault?n.preventDefault():n.returnValue=!1,this.currentContextMenuId=t.id},setDepartmentData:function(t){t.isRoot=!0,this.departmentData=t},mousedownView:function(t){this.canMove=!0,this.initPageX=t.pageX,this.initPageY=t.pageY,this.oldMarginLeft=this.orgTreeOffsetLeft,this.oldMarginTop=this.orgTreeOffsetTop,Object(i["i"])(document,"mousemove",this.mousemoveView),Object(i["i"])(document,"mouseup",this.mouseupView)},mousemoveView:function(t){if(this.canMove){var e=t.pageX,n=t.pageY;this.orgTreeOffsetLeft=this.oldMarginLeft+e-this.initPageX,this.orgTreeOffsetTop=this.oldMarginTop+n-this.initPageY}},mouseupView:function(){this.canMove=!1,Object(i["h"])(document,"mousemove",this.mousemoveView),Object(i["h"])(document,"mouseup",this.mouseupView)},handleDropdownClick:function(t){t.stopPropagation()},handleDocumentContextmenu:function(){this.canMove=!1},handleContextMenuClick:function(t,e){this.$emit("on-menu-click",{data:t,key:e})}},mounted:function(){Object(i["i"])(document,"contextmenu",this.handleDocumentContextmenu)},beforeDestroy:function(){Object(i["h"])(document,"contextmenu",this.handleDocumentContextmenu)}},c=r,u=n("2877"),l=Object(u["a"])(c,o,a,!1,null,null,null);e["default"]=l.exports},bf20:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"zoom-wrapper"},[e("button",{staticClass:"zoom-button",on:{click:function(e){return t.scale("down")}}},[e("Icon",{attrs:{type:"md-remove",size:14,color:"#fff"}})],1),e("span",{staticClass:"zoom-number"},[t._v(t._s(t.value)+"%")]),e("button",{staticClass:"zoom-button",on:{click:function(e){return t.scale("up")}}},[e("Icon",{attrs:{type:"md-add",size:14,color:"#fff"}})],1)])},a=[],i=(n("c5f6"),{name:"ZoomController",props:{value:{type:Number,default:100},step:{type:Number,default:20},min:{type:Number,default:10},max:{type:Number,default:200}},methods:{scale:function(t){var e=this.value+("down"===t?-this.step:this.step);e<this.min&&"down"===t||e>this.max&&"up"===t||this.$emit("input",e)}}}),s=i,r=(n("0cf2"),n("2877")),c=Object(r["a"])(s,o,a,!1,null,null,null);e["default"]=c.exports}}]);